# 创建对象 

## 工厂模式

以函数封装以特定接口创建对象的细节。 

```javascript
function createPerson(name, age, job) {
  var o = new Object();
  o.name = name;
  o.age = age;
  o.job = job;
  o.sayName = function() {
    alert(this.name);
  };
  return o;
}
var person1 = createPerson("Nicholas", 29," Software Engineer");
var person2 = createPerson("Greg", 27, "Doctor");
```   

可创建多个相似对象，但没有解决对象识别问题（即怎样知道一个对象的类型）

## 构造函数模式     

```javascript
function Person(name, age, job){
this.name = name;
this.age = age;
this.job = job;
this.sayName = function(){
alert(this.name);
};
}
var person1 = new Person("Nicholas", 29, "Software Engineer");
var person2 = new Person("Greg", 27, "Doctor");
```

1,将构造函数当作函数
```javascript
//use as a constructor
var person = new Person("Nicholas", 29, "Software Engineer");
person.sayName(); //”Nicholas”
//call as a function
Person("Greg", 27, "Doctor"); //adds to window
window.sayName(); //”Greg”
//call in the scope of another object
var o = new Object();
Person.call(o, "Kristen", 25, "Nurse");
o.sayName(); //”Kristen”
```    

## 原型模式 
每个函数都有一个prototype（原型）属性   

prototype（原型）对象：让所有实例共享它所包含的属性和方法  

```javascript```
function Person(){
}
Person.prototype.name = "Nicholas";
Person.prototype.age = 29;
Person.prototype.job = "Software Engineer";
Person.prototype.sayName = function(){
alert(this.name);
};
var person1 = new Person();
person1.sayName(); //”Nicholas”
var person2 = new Person();
person2.sayName(); //”Nicholas”
alert(person1.sayName == person2.sayName); //true
```

构造函数变为空函数，新对象的属性和方法是由所有实例共享。  

* `isPrototypeOf()`   确定对象之间是否存在这种关系

```javascript
alert(Person.prototype.isPrototypeOf(person1)); //true
alert(Person.prototype.isPrototypeOf(person2)); //true
```   

* `Object.getPrototypeOf()`  返回[[Prototype]]的值  

```javascript
alert(Object.getPrototypeOf(person1) == Person.prototype); //true
alert(Object.getPrototypeOf(person1).name); //”Nicholas”
```   

* 为对象实例添加一个属性时。会屏蔽原型对象中的同名属性值,但不会改变它.  

```javascript
function Person(){
}
Person.prototype.name = "Nicholas";
Person.prototype.age = 29;
Person.prototype.job = "Software Engineer";
Person.prototype.sayName = function(){
alert(this.name);
};
var person1 = new Person();
var person2 = new Person();
person1.name = "Greg";
alert(person1.name); //”Greg” - from instance
alert(person2.name); //”Nicholas” - from prototype

delete person1.name;//若想访问原型属性，可以使用delete删除实例属性
alert(person1.name); //”Nicholas” - from prototype
```  

* `hasOwnProperty()` 检测属性是存在于实例中还是原型中，存在于实例中返回true

```javascript
function Person(){
}
Person.prototype.name = "Nicholas";
Person.prototype.age = 29;
Person.prototype.job = "Software Engineer";
Person.prototype.sayName = function(){
alert(this.name);
};
var person1 = new Person();
var person2 = new Person();
alert(person1.hasOwnProperty("name")); //false
person1.name = "Greg";
alert(person1.name); //”Greg” - from instance
alert(person1.hasOwnProperty("name")); //true
alert(person2.name); //”Nicholas” - from prototype
alert(person2.hasOwnProperty("name")); //false
delete person1.name;
alert(person1.name); //”Nicholas” - from the prototype
alert(person1.hasOwnProperty("name")); //false
``` 

* `in`操作符 

```javascript
function hasPrototypeProperty(object, name){
return !object.hasOwnProperty(name) && (name in object);
}
```
in 操作符返回true，object.hasOwnProperty()返回false，即可判定此属性为原型属性。  

```javascript
function Person(){
}
Person.prototype.name = "Nicholas";
Person.prototype.age = 29;
Person.prototype.job = "Software Engineer";
Person.prototype.sayName = function(){
alert(this.name);
};
var person1 = new Person();
function hasPrototypeProperty(object, name){
return !object.hasOwnProperty(name) && (name in object);
}
console.log(hasPrototypeProperty(person1,"name"));//true
person1.name = "Greg";
console.log(hasPrototypeProperty(person1, "name")); //false
```

* `Object.keys()` 接收一个对象作为参数，返回一个包含所有可枚举实例属性的字符串数组 

```javascript
function Person() {}
Person.prototype.name = "Nicholas";
Person.prototype.age = 29;
Person.prototype.job = "Software Engineer;"
Person.prototype.sayName = function() {
  alert(this.name);
};
var keys = Object.keys(Person.prototype);//Person的原型调用
alert(keys); //”name,age,job,sayName”

var p1 = new Person();
var p1keys = Object.keys(p1);//Person的实例调用
alert(p1keys); //为空

p1.name = "Rob";
p1.age = 31;
var p1keys = Object.keys(p1);
alert(p1keys); //”name,age”
```
* `getOwnPropertyNames`得到所有实例属性

```javascript
var keys = Object.getOwnPropertyNames(Person.prototype);
alert(keys); //”constructor,name,age,job,sayName”
```    

注意：结果中包含不可枚举的constructor属性

* 添加原型对象属性的简单写法  

```javascript
function Person(){
}
Person.prototype = {
name : “Nicholas”,
age : 29,
job : “Software Engineer”,
sayName : function () {
alert(this.name);
}
};
```   /
